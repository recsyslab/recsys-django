---
title: オフライン処理の実装
layout: default
---

{% include header.html %}

{% raw %}

# オフライン処理の実装

[さまざまな推薦システムによる推薦リストの取得](24.md)で実装したように、メインページ上には、ランダム推薦システムによる推薦リスト、人気ベース推薦システムによる推薦リストに加え、アイテムベース協調フィルタリングによる推薦リスト用の推薦スロットも用意しています。しかし、対象ユーザがログインし、いくつかのアイテムに対して評価値を登録したにもかかわらず、アイテムベース協調フィルタリングによる推薦リストは依然として表示されていません。これは、データベース上の推薦リストが更新されていないためです。多くの場合、推薦リストはリアルタイムに更新されるわけではなく、一定のタイミングでまとめて更新されることになります。これをオフライン処理とよびます。ここでは、オフライン処理による推薦リストの更新処理を実装してみましょう。

オフライン処理は`offline`というアプリケーションで実装することにします。まずは、`offline`アプリケーションを作成しましょう。`manage.py`があるディレクトリにいることを確認したうえで、以下のコマンドを実行してください。

```bash
$ python manage.py startapp offline
```

すると、現在のディレクトリに、`offline/`というディレクトリが作成されます。`offline/`ディレクトリに`data/`ディレクトリおよび`recommenders/`ディレクトリを作成してください。さらに、`recommenders/`ディレクトリに下記のソースファイルを作成してください。

- `base_recommender.py`
- `dataset.py`
- `item_similarity.py`
- `itemcf.py`
- `popularity.py`

`tree`コマンドで`offline/ディレクトリ以下のディレクトリ構成を確認すると下記のとおりとなります。

```bash
$ tree offline/
offline/
├── __init__.py
├── admin.py
├── apps.py
├── data
├── migrations
│   └── __init__.py
├── models.py
├── recommenders
│   ├── base_recommender.py
│   ├── dataset.py
│   ├── item_similarity.py
│   ├── itemcf.py
│   └── popularity.py
├── tests.py
└── views.py

3 directories, 12 files
```








{% endraw %}
